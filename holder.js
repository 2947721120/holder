/*!

Holder - client side image placeholders
Version 2.4.0+8fpkn
Â© 2014 Ivan Malopinsky - http://imsky.co

Site:		http://imsky.github.io/holder
Issues:		https://github.com/imsky/holder/issues
License:	http://opensource.org/licenses/MIT

*/
!function(t,e,i){e[t]=i}("onDomReady",this,function(t){"use strict";function e(t){if(!y){if(!a.body)return r(e);for(y=!0;t=S.shift();)r(t)}}function i(t){(v||t.type===l||a[c]===h)&&(n(),e())}function n(){v?(a[x](p,i,s),t[x](l,i,s)):(a[g](w,i),t[g](u,i))}function r(t,e){setTimeout(t,+e>=0?e:1)}function o(t){y?r(t):S.push(t)}null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function A(){document.removeEventListener("DOMContentLoaded",A,!1),document.readyState="complete"},!1),document.readyState="loading");var a=t.document,d=a.documentElement,l="load",s=!1,u="on"+l,h="complete",c="readyState",f="attachEvent",g="detachEvent",m="addEventListener",p="DOMContentLoaded",w="onreadystatechange",x="removeEventListener",v=m in a,b=s,y=s,S=[];if(a[c]===h)r(e);else if(v)a[m](p,i,s),t[m](l,i,s);else{a[f](w,i),t[f](u,i);try{b=null==t.frameElement&&d}catch(_){}b&&b.doScroll&&!function C(){if(!y){try{b.doScroll("left")}catch(t){return r(C,50)}n(),e()}}()}return o.version="1.4.0",o.isReady=function(){return y},o}(this)),document.querySelectorAll||(document.querySelectorAll=function(t){var e,i=document.createElement("style"),n=[];for(document.documentElement.firstChild.appendChild(i),document._qsa=[],i.styleSheet.cssText=t+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),i.parentNode.removeChild(i);document._qsa.length;)e=document._qsa.shift(),e.style.removeAttribute("x-qsa"),n.push(e);return document._qsa=null,n}),document.querySelector||(document.querySelector=function(t){var e=document.querySelectorAll(t);return e.length?e[0]:null}),document.getElementsByClassName||(document.getElementsByClassName=function(t){return t=String(t).replace(/^|\s+/g,"."),document.querySelectorAll(t)}),function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.atob=t.atob||function(t){t=String(t);var i,n=0,r=[],o=0,a=0;if(t=t.replace(/\s/g,""),t.length%4===0&&(t=t.replace(/=+$/,"")),t.length%4===1)throw Error("InvalidCharacterError");if(/[^+/0-9A-Za-z]/.test(t))throw Error("InvalidCharacterError");for(;n<t.length;)i=e.indexOf(t.charAt(n)),o=o<<6|i,a+=6,24===a&&(r.push(String.fromCharCode(o>>16&255)),r.push(String.fromCharCode(o>>8&255)),r.push(String.fromCharCode(255&o)),a=0,o=0),n+=1;return 12===a?(o>>=4,r.push(String.fromCharCode(255&o))):18===a&&(o>>=2,r.push(String.fromCharCode(o>>8&255)),r.push(String.fromCharCode(255&o))),r.join("")},t.btoa=t.btoa||function(t){t=String(t);var i,n,r,o,a,d,l,s=0,u=[];if(/[^\x00-\xFF]/.test(t))throw Error("InvalidCharacterError");for(;s<t.length;)i=t.charCodeAt(s++),n=t.charCodeAt(s++),r=t.charCodeAt(s++),o=i>>2,a=(3&i)<<4|n>>4,d=(15&n)<<2|r>>6,l=63&r,s===t.length+2?(d=64,l=64):s===t.length+1&&(l=64),u.push(e.charAt(o),e.charAt(a),e.charAt(d),e.charAt(l));return u.join("")}}(this),function(){function t(e,i,n){e.document;var r,o=e.currentStyle[i].match(/([\d\.]+)(%|cm|em|in|mm|pc|pt|)/)||[0,0,""],a=o[1],d=o[2];return n=n?/%|em/.test(d)&&e.parentElement?t(e.parentElement,"fontSize",null):16:n,r="fontSize"==i?n:/width/i.test(i)?e.clientWidth:e.clientHeight,"%"==d?a/100*r:"cm"==d?.3937*a*96:"em"==d?a*n:"in"==d?96*a:"mm"==d?.3937*a*96/10:"pc"==d?12*a*96/72:"pt"==d?96*a/72:a}function e(t,e){var i="border"==e?"Width":"",n=e+"Top"+i,r=e+"Right"+i,o=e+"Bottom"+i,a=e+"Left"+i;t[e]=(t[n]==t[r]&&t[n]==t[o]&&t[n]==t[a]?[t[n]]:t[n]==t[o]&&t[a]==t[r]?[t[n],t[r]]:t[a]==t[r]?[t[n],t[r],t[o]]:[t[n],t[r],t[o],t[a]]).join(" ")}function i(i){var n,r=this,o=i.currentStyle,a=t(i,"fontSize"),d=function(t){return"-"+t.toLowerCase()};for(n in o)if(Array.prototype.push.call(r,"styleFloat"==n?"float":n.replace(/[A-Z]/,d)),"width"==n)r[n]=i.offsetWidth+"px";else if("height"==n)r[n]=i.offsetHeight+"px";else if("styleFloat"==n)r.float=o[n];else if(/margin.|padding.|border.+W/.test(n)&&"auto"!=r[n])r[n]=Math.round(t(i,n,a))+"px";else if(/^outline/.test(n))try{r[n]=o[n]}catch(l){r.outlineColor=o.color,r.outlineStyle=r.outlineStyle||"none",r.outlineWidth=r.outlineWidth||"0px",r.outline=[r.outlineColor,r.outlineWidth,r.outlineStyle].join(" ")}else r[n]=o[n];e(r,"margin"),e(r,"padding"),e(r,"border"),r.fontSize=Math.round(a)+"px"}window.getComputedStyle||(i.prototype={constructor:i,getPropertyPriority:function(){throw new Error("NotSupportedError: DOM Exception 9")},getPropertyValue:function(t){return this[t.replace(/-\w/g,function(t){return t[1].toUpperCase()})]},item:function(t){return this[t]},removeProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},setProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},getPropertyCSSValue:function(){throw new Error("NotSupportedError: DOM Exception 9")}},window.getComputedStyle=Window.prototype.getComputedStyle=function(t){return new i(t)})}(),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(t){var e=this.__proto__||this.constructor.prototype;return t in this&&(!(t in e)||e[t]!==this[t])}),function(t,e){function i(t,e){for(var i={theme:h(m.settings.themes.gray,{})},n=!1,r=t.length,o=0;r>o;o++){var a=t[o];if(m.flags.dimensions.match(a))n=!0,i.dimensions=m.flags.dimensions.output(a);else if(m.flags.fluid.match(a))n=!0,i.dimensions=m.flags.fluid.output(a),i.fluid=!0;else if(m.flags.textmode.match(a))i.textmode=m.flags.textmode.output(a);else if(m.flags.colors.match(a)){var d=m.flags.colors.output(a);i.theme=h(d,i.theme)}else e.themes[a]?e.themes.hasOwnProperty(a)&&(i.theme=h(e.themes[a],{})):m.flags.font.match(a)?i.font=m.flags.font.output(a):m.flags.auto.match(a)?i.auto=!0:m.flags.text.match(a)&&(i.text=m.flags.text.output(a))}return n?i:!1}function n(t,e,i){e=parseInt(e,10),t=parseInt(t,10);var n=Math.max(e,t),r=Math.min(e,t),o=1/12,a=Math.min(.75*r,.75*n*o);return{height:Math.round(Math.max(i,a))}}function r(t){var e=t.dimensions,i=t.template,r=t.ratio,o=t.holder,a="literal"==o.textmode,d="exact"==o.textmode,l=n(e.width,e.height,i.size),s=l.height,u=e.width*r,h=e.height*r,c=i.font?i.font:"Arial,Helvetica,sans-serif",f=i.fontweight?i.fontweight:"bold";f="normal"==f?"":f;var g=i.text?i.text:Math.floor(e.width)+"x"+Math.floor(e.height);if(a){var e=o.dimensions;g=e.width+"x"+e.height}else if(d&&o.exact_dimensions){var e=o.exact_dimensions;g=Math.floor(e.width)+"x"+Math.floor(e.height)}var m=w({text:g,width:u,height:h,text_height:s,font:c,font_weight:f,template:i});return m}function o(t){var e=t.dimensions,i=t.template,r=t.holder,o="literal"==r.textmode,a="exact"==r.textmode,d=n(e.width,e.height,i.size),l=d.height,s=e.width,u=e.height,h=i.font?i.font:"Arial,Helvetica,sans-serif",c=i.fontweight?i.fontweight:"bold",f=i.text?i.text:Math.floor(e.width)+"x"+Math.floor(e.height);if(o){var e=r.dimensions;f=e.width+"x"+e.height}else if(a&&r.exact_dimensions){var e=r.exact_dimensions;f=Math.floor(e.width)+"x"+Math.floor(e.height)}var g=x({text:f,width:s,height:u,text_height:l,font:h,font_weight:c,template:i});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(g)))}function a(t,e,i,n){var a=null;if("canvas"==n.renderer?a=r(e):"svg"==n.renderer&&(a=o(e)),null==a)throw"Holder: couldn't render placeholder";"background"==t?(i.style.backgroundImage="url("+a+")",i.style.backgroundSize=e.dimensions.width+"px "+e.dimensions.height+"px"):i.setAttribute("src",a),i.setAttribute("data-holder-rendered",!0)}function d(t,e,i,n,r){var o=i.dimensions,d=i.theme,s=i.text?decodeURIComponent(i.text):i.text,c=o.width+"x"+o.height;d=s?h(d,{text:s}):d,d=i.font?h(d,{font:i.font}):d,e.setAttribute("data-src",n),i.theme=d,e.holderData=i,e.configData=r,"image"==t?(e.setAttribute("alt",s?s:d.text?d.text+" ["+c+"]":c),"html"!=r.renderer&&i.auto||(e.style.width=o.width+"px",e.style.height=o.height+"px"),"html"==r.renderer?e.style.backgroundColor=d.background:(a(t,{dimensions:o,template:d,ratio:m.config.ratio,holder:i},e,r),i.textmode&&"exact"==i.textmode&&(m.runtime.resizableImages.push(e),l(e)))):"background"==t?"html"!=r.renderer&&a(t,{dimensions:o,template:d,ratio:m.config.ratio,holder:i},e,r):"fluid"==t&&(e.setAttribute("alt",s?s:d.text?d.text+" ["+c+"]":c),"%"==o.height.slice(-1)?e.style.height=o.height:null!=i.auto&&i.auto||(e.style.height=o.height+"px"),"%"==o.width.slice(-1)?e.style.width=o.width:null!=i.auto&&i.auto||(e.style.width=o.width+"px"),("inline"==e.style.display||""===e.style.display||"none"==e.style.display)&&(e.style.display="block"),u(e),"html"==r.renderer?e.style.backgroundColor=d.background:(m.runtime.resizableImages.push(e),l(e)))}function l(t){var e;e=null==t||null==t.nodeType?m.runtime.resizableImages:[t];for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];if(n.holderData){var r=n.holderData,o=s(n,p.invisibleErrorFn(l));if(o){if(r.fluid&&r.auto)switch(r.fluid_data.mode){case"width":o.height=o.width/r.fluid_data.ratio;break;case"height":o.width=o.height*r.fluid_data.ratio}var d={dimensions:o,template:r.theme,ratio:m.config.ratio,holder:r};r.textmode&&"exact"==r.textmode&&(r.exact_dimensions=o,d.dimensions=r.dimensions),a("image",d,n,n.configData)}}}}function s(t,e){var i={height:t.clientHeight,width:t.clientWidth};return i.height||i.width?(t.removeAttribute("data-holder-invisible"),i):(t.setAttribute("data-holder-invisible",!0),void e.call(this,t))}function u(t){if(t.holderData){var e=s(t,p.invisibleErrorFn(u));if(e){var i=t.holderData;i.initial_dimensions=e,i.fluid_data={fluid_height:"%"==i.dimensions.height.slice(-1),fluid_width:"%"==i.dimensions.width.slice(-1),mode:null},i.fluid_data.fluid_width&&!i.fluid_data.fluid_height?(i.fluid_data.mode="width",i.fluid_data.ratio=i.initial_dimensions.width/parseFloat(i.dimensions.height)):!i.fluid_data.fluid_width&&i.fluid_data.fluid_height&&(i.fluid_data.mode="height",i.fluid_data.ratio=parseFloat(i.dimensions.width)/i.initial_dimensions.height)}}}function h(t,e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i}function c(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+":"+t[i]);return e.join(";")}function f(t){m.runtime.debounceTimer||t.call(this),m.runtime.debounceTimer&&clearTimeout(m.runtime.debounceTimer),m.runtime.debounceTimer=setTimeout(function(){m.runtime.debounceTimer=null,t.call(this)},m.config.debounce)}function g(){f(function(){l(null)})}var m={},p={addTheme:function(t,e){return null!=t&&null!=e&&(m.settings.themes[t]=e),this},addImage:function(t,e){var i=document.querySelectorAll(e);if(i.length)for(var n=0,r=i.length;r>n;n++){var o=document.createElement("img");o.setAttribute("data-src",t),i[n].appendChild(o)}return this},run:function(t){var e=h({},m.config);m.runtime.preempted=!0;var n=h(m.settings,t),r=[],o=[],a=[];for(n.use_canvas?e.renderer="canvas":n.use_svg&&(e.renderer="svg"),"string"==typeof n.images?o=document.querySelectorAll(n.images):window.NodeList&&n.images instanceof window.NodeList?o=n.images:window.Node&&n.images instanceof window.Node?o=[n.images]:window.HTMLCollection&&n.images instanceof window.HTMLCollection&&(o=n.images),"string"==typeof n.bgnodes?a=document.querySelectorAll(n.bgnodes):window.NodeList&&n.elements instanceof window.NodeList?a=n.bgnodes:window.Node&&n.bgnodes instanceof window.Node&&(a=[n.bgnodes]),u=0,s=o.length;s>u;u++)r.push(o[u]);for(var l=new RegExp(n.domain+'/(.*?)"?\\)'),s=a.length,u=0;s>u;u++){var c=window.getComputedStyle(a[u],null).getPropertyValue("background-image"),f=c.match(l),g=a[u].getAttribute("data-background-src");if(f){var p=i(f[1].split("/"),n);p&&d("background",a[u],p,c,e)}else if(null!=g){var p=i(g.substr(g.lastIndexOf(n.domain)+n.domain.length+1).split("/"),n);p&&d("background",a[u],p,c,e)}}for(s=r.length,u=0;s>u;u++){var w,x;x=w=c=null;try{x=r[u].getAttribute("src"),attr_datasrc=r[u].getAttribute("data-src")}catch(v){}if(null==attr_datasrc&&x&&x.indexOf(n.domain)>=0?c=x:attr_datasrc&&attr_datasrc.indexOf(n.domain)>=0&&(c=attr_datasrc),c){var p=i(c.substr(c.lastIndexOf(n.domain)+n.domain.length+1).split("/"),n);p&&(p.fluid?d("fluid",r[u],p,c,e):d("image",r[u],p,c,e))}}return this},invisibleErrorFn:function(){return function(t){if(t.hasAttribute("data-holder-invisible"))throw"Holder: invisible placeholder"}}},w=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return function(i){return t.width=i.width,t.height=i.height,e.fillStyle=i.template.background,e.fillRect(0,0,i.width,i.height),e.textAlign="center",e.textBaseline="middle",e.font=i.font_weight+" "+i.text_height*m.config.ratio+"px "+i.font,e.fillStyle=i.template.foreground,e.fillText(i.text,i.width/2,i.height/2,i.width),t.toDataURL("image/png")}}(),x=function(){if(window.XMLSerializer){var t=new XMLSerializer,e="http://www.w3.org/2000/svg",i=document.createElementNS(e,"svg");i.webkitMatchesSelector&&i.setAttribute("xmlns","http://www.w3.org/2000/svg");var n="",r=document.createElementNS(e,"rect"),o=document.createElementNS(e,"text"),a=document.createTextNode(null);return o.setAttribute("text-anchor","middle"),o.appendChild(a),i.appendChild(r),i.appendChild(o),function(e){if(isNaN(e.width)||isNaN(e.height)||isNaN(e.text_height))throw"Holder: incorrect properties passed to SVG constructor";return i.setAttribute("width",e.width),i.setAttribute("height",e.height),i.setAttribute("viewBox","0 0 "+e.width+" "+e.height),i.setAttribute("preserveAspectRatio","none"),r.setAttribute("width",e.width),r.setAttribute("height",e.height),r.setAttribute("fill",e.template.background),o.setAttribute("x",e.width/2),o.setAttribute("y",e.height/2),a.nodeValue=e.text,o.setAttribute("style",c({fill:e.template.foreground,"font-weight":e.font_weight,"font-size":e.text_height+"px","font-family":e.font,"dominant-baseline":"central"})),n+t.serializeToString(i)}}}();m.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(t){var e=this.regex.exec(t);return{width:+e[1],height:+e[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(t){var e=this.regex.exec(t);return{width:e[1],height:e[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(t){var e=this.regex.exec(t);return{foreground:"#"+e[2],background:"#"+e[1]}}},text:{regex:/text\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},font:{regex:/font\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},auto:{regex:/^auto$/},textmode:{regex:/textmode\:(.*)/,output:function(t){return this.regex.exec(t)[1]}}};for(var v in m.flags)m.flags.hasOwnProperty(v)&&(m.flags[v].match=function(t){return t.match(this.regex)});m.settings={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12},sky:{background:"#0D8FDB",foreground:"#fff",size:12},vine:{background:"#39DBAC",foreground:"#1E292C",size:12},lava:{background:"#F8591A",foreground:"#1C2846",size:12}}},p.add_theme=p.addTheme,p.add_image=p.addImage,p.invisible_error_fn=p.invisibleErrorFn,m.config={renderer:"html",debounce:100,ratio:1},m.runtime={preempted:!1,resizableImages:[],debounceTimer:null},function(){var t=1,e=1,i=document.createElement("canvas"),n=null;i.getContext&&-1!=i.toDataURL("image/png").indexOf("data:image/png")&&(m.config.renderer="canvas",n=i.getContext("2d")),"canvas"==m.config.renderer&&(t=window.devicePixelRatio||1,e=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1),m.config.ratio=t/e,document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect&&(m.config.renderer="svg")}(),t(p,"Holder",e),e.onDomReady&&e.onDomReady(function(){m.runtime.preempted||p.run({}),e.addEventListener?(e.addEventListener("resize",g,!1),e.addEventListener("orientationchange",g,!1)):e.attachEvent("onresize",g),"object"==typeof e.Turbolinks&&e.document.addEventListener("page:change",function(){m.run({})})})}(function(t,e,i){var n="function"==typeof define&&define.amd;n?define(t):i[e]=t},this);